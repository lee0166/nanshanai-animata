<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIå½±è§†èµ„äº§ç”Ÿæˆå¹³å° - å°è¯´è§£æå®Œæ•´æµç¨‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .phase {
            margin-bottom: 50px;
            border-left: 4px solid #667eea;
            padding-left: 30px;
        }
        
        .phase-title {
            font-size: 1.8em;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .phase-badge {
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.6em;
            margin-left: 15px;
        }
        
        .step {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .step:hover {
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transform: translateX(5px);
        }
        
        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .step-number {
            background: #667eea;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .step-title {
            font-size: 1.3em;
            color: #333;
            font-weight: 600;
        }
        
        .step-desc {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .prompt-box {
            background: #2d3748;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        .prompt-label {
            color: #48bb78;
            font-size: 0.85em;
            font-weight: bold;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .prompt-content {
            color: #e2e8f0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            white-space: pre-wrap;
        }
        
        .code-block {
            background: #1a202c;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            overflow-x: auto;
        }
        
        .code-block code {
            color: #68d391;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85em;
            line-height: 1.5;
        }
        
        .highlight {
            background: linear-gradient(120deg, #ffeaa7 0%, #ffeaa7 100%);
            background-repeat: no-repeat;
            background-size: 100% 40%;
            background-position: 0 88%;
            padding: 0 4px;
        }
        
        .flow-arrow {
            text-align: center;
            font-size: 2em;
            color: #667eea;
            margin: 20px 0;
        }
        
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .tech-tag {
            background: #edf2f7;
            color: #4a5568;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            border: 1px solid #e2e8f0;
        }
        
        .optimization-badge {
            display: inline-block;
            background: #48bb78;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            margin-left: 10px;
        }
        
        .warning-badge {
            display: inline-block;
            background: #ed8936;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            margin-left: 10px;
        }
        
        .info-box {
            background: #ebf8ff;
            border-left: 4px solid #4299e1;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .info-box-title {
            color: #2b6cb0;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        tr:hover {
            background: #f7fafc;
        }
        
        .footer {
            background: #2d3748;
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .footer p {
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }
            
            .phase {
                padding-left: 15px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¬ AIå½±è§†èµ„äº§ç”Ÿæˆå¹³å°</h1>
            <p>å°è¯´è§£æå®Œæ•´æµç¨‹æ–‡æ¡£ - ä»ä¸Šä¼ åˆ°è§£æå®Œæˆ</p>
        </div>
        
        <div class="content">
            <!-- æµç¨‹æ¦‚è§ˆ -->
            <div class="phase">
                <h2 class="phase-title">
                    ğŸ“‹ æµç¨‹æ¦‚è§ˆ
                    <span class="phase-badge">æ€»è§ˆ</span>
                </h2>
                <table>
                    <tr>
                        <th>é˜¶æ®µ</th>
                        <th>ä¸»è¦åŠŸèƒ½</th>
                        <th>æ¶‰åŠæ¨¡å—</th>
                        <th>é¢„ä¼°è€—æ—¶</th>
                    </tr>
                    <tr>
                        <td><strong>Phase 0</strong></td>
                        <td>å°è¯´ä¸Šä¼ ä¸é¢„å¤„ç†</td>
                        <td>æ–‡ä»¶ä¸Šä¼ ã€æ–‡æœ¬æ¸…æ´—</td>
                        <td>1-5ç§’</td>
                    </tr>
                    <tr>
                        <td><strong>Phase 1</strong></td>
                        <td>åŸºç¡€è§£ææ¶æ„</td>
                        <td>è¯­ä¹‰åˆ†å—ã€JSONä¿®å¤ã€æ¨¡å‹è·¯ç”±ã€çŠ¶æ€ç®¡ç†</td>
                        <td>30-60ç§’</td>
                    </tr>
                    <tr>
                        <td><strong>Phase 2</strong></td>
                        <td>æ•ˆç‡ä¼˜åŒ–</td>
                        <td>RAGæ£€ç´¢ã€å¤šçº§ç¼“å­˜</td>
                        <td>20-40ç§’</td>
                    </tr>
                    <tr>
                        <td><strong>Phase 3</strong></td>
                        <td>ä¸šåŠ¡ä¼˜åŒ–</td>
                        <td>çŸ­å‰§è§„åˆ™æ£€æŸ¥ã€äººå·¥å®¡æ ¸</td>
                        <td>10-30ç§’(äººå·¥)</td>
                    </tr>
                </table>
            </div>

            <!-- Phase 0: ä¸Šä¼ é˜¶æ®µ -->
            <div class="phase">
                <h2 class="phase-title">
                    Phase 0: å°è¯´ä¸Šä¼ ä¸é¢„å¤„ç†
                    <span class="phase-badge">å‡†å¤‡é˜¶æ®µ</span>
                </h2>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">1</div>
                        <div class="step-title">æ–‡ä»¶ä¸Šä¼ </div>
                    </div>
                    <div class="step-desc">
                        ç”¨æˆ·ä¸Šä¼ å°è¯´æ–‡ä»¶(txt/pdf/docx)ï¼Œç³»ç»Ÿè¿›è¡Œæ–‡ä»¶æ ¼å¼éªŒè¯å’Œå¤§å°æ£€æŸ¥ã€‚
                    </div>
                    <div class="tech-stack">
                        <span class="tech-tag">æ–‡ä»¶éªŒè¯</span>
                        <span class="tech-tag">æ ¼å¼è½¬æ¢</span>
                        <span class="tech-tag">ç¼–ç æ£€æµ‹</span>
                    </div>
                </div>
                
                <div class="flow-arrow">â¬‡</div>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">2</div>
                        <div class="step-title">æ–‡æœ¬æ¸…æ´—</div>
                    </div>
                    <div class="step-desc">
                        æå–çº¯æ–‡æœ¬å†…å®¹ï¼Œå»é™¤å¹¿å‘Šã€é¡µçœ‰é¡µè„šã€ç‰¹æ®Šç¬¦å·ç­‰æ— å…³å†…å®¹ã€‚
                    </div>
                    <div class="code-block">
                        <code>// æ–‡æœ¬æ¸…æ´—ç¤ºä¾‹
function cleanText(rawText: string): string {
  return rawText
    .replace(/å¹¿å‘Š[\s\S]*?å¹¿å‘Šç»“æŸ/g, '')  // å»é™¤å¹¿å‘Š
    .replace(/ç¬¬[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å]+ç« /g, '\nã€ç¬¬$1ç« ã€‘\n')  // ç»Ÿä¸€ç« èŠ‚æ ‡è®°
    .replace(/\s+/g, ' ')  // åˆå¹¶ç©ºç™½
    .trim();
}</code>
                    </div>
                </div>
            </div>

            <!-- Phase 1: åŸºç¡€æ¶æ„ -->
            <div class="phase">
                <h2 class="phase-title">
                    Phase 1: åŸºç¡€è§£ææ¶æ„
                    <span class="phase-badge">æ ¸å¿ƒé˜¶æ®µ</span>
                </h2>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">3</div>
                        <div class="step-title">è¯­ä¹‰åˆ†å— <span class="optimization-badge">ä¼˜åŒ–</span></div>
                    </div>
                    <div class="step-desc">
                        ä½¿ç”¨<span class="highlight">SemanticChunker</span>è¿›è¡Œæ™ºèƒ½åˆ†å—ï¼ŒæŒ‰ç« èŠ‚ã€æ®µè½ã€å¥å­è¾¹ç•Œåˆ†å‰²ï¼Œé¿å…åˆ‡æ–­å™äº‹é€»è¾‘ã€‚
                    </div>
                    
                    <div class="info-box">
                        <div class="info-box-title">ğŸ’¡ ä¼˜åŒ–å‰ vs ä¼˜åŒ–å</div>
                        <p><strong>ä¼˜åŒ–å‰:</strong> å›ºå®š6000å­—ç¬¦åˆ†å—ï¼Œå¯èƒ½åˆ‡æ–­å¯¹è¯æˆ–åœºæ™¯</p>
                        <p><strong>ä¼˜åŒ–å:</strong> è¯­ä¹‰è¾¹ç•Œè¯†åˆ«ï¼Œä¿æŒå™äº‹å®Œæ•´æ€§</p>
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">ç³»ç»Ÿæç¤ºè¯ (System Prompt)</div>
                        <div class="prompt-content">ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ–‡æœ¬åˆ†å—åŠ©æ‰‹ã€‚è¯·æ ¹æ®ä»¥ä¸‹è§„åˆ™å¯¹å°è¯´æ–‡æœ¬è¿›è¡Œåˆ†å—ï¼š

1. ä¼˜å…ˆæŒ‰ã€ç¬¬Xç« ã€‘åˆ†å‰²
2. ç« èŠ‚å†…æŒ‰æ®µè½åˆ†å‰²ï¼ˆåŒæ¢è¡Œï¼‰
3. æ¯å—ä¿ç•™å‰500å­—ä½œä¸ºä¸Šä¸‹æ–‡
4. æå–å…³é”®ä¿¡æ¯ï¼šäººç‰©ã€åœºæ™¯ã€æƒ…ç»ª

è¾“å‡ºæ ¼å¼è¦æ±‚ï¼š
{
  "chunks": [
    {
      "id": "chunk_0",
      "content": "æ–‡æœ¬å†…å®¹",
      "prevContext": "å‰æ–‡æ‘˜è¦",
      "metadata": {
        "characters": ["äººç‰©å"],
        "sceneHint": "åœºæ™¯æç¤º",
        "importance": 1-10
      }
    }
  ]
}</div>
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">ç”¨æˆ·æç¤ºè¯ (User Prompt)</div>
                        <div class="prompt-content">è¯·å¯¹ä»¥ä¸‹å°è¯´æ–‡æœ¬è¿›è¡Œè¯­ä¹‰åˆ†å—ï¼š

[å°è¯´æ–‡æœ¬å†…å®¹ï¼Œçº¦10ä¸‡å­—]

è¦æ±‚ï¼š
- è¯†åˆ«æ‰€æœ‰ç« èŠ‚è¾¹ç•Œ
- æ¯å—ä¸è¶…è¿‡4000 tokens
- æ ‡æ³¨æ¯å—çš„äººç‰©å’Œåœºæ™¯ä¿¡æ¯
- è¯„ä¼°æ¯å—çš„é‡è¦æ€§è¯„åˆ†</div>
                    </div>
                </div>
                
                <div class="flow-arrow">â¬‡</div>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">4</div>
                        <div class="step-title">å…¨å±€æ‘˜è¦ç”Ÿæˆ <span class="optimization-badge">æ¨¡å‹è·¯ç”±</span></div>
                    </div>
                    <div class="step-desc">
                        ä½¿ç”¨<span class="highlight">ModelRouter</span>è‡ªåŠ¨é€‰æ‹©kimiæ¨¡å‹ï¼ˆé•¿ä¸Šä¸‹æ–‡ä¼˜åŠ¿ï¼‰ç”Ÿæˆå°è¯´å…¨å±€æ‘˜è¦ã€‚
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">ç³»ç»Ÿæç¤ºè¯ (System Prompt) - è·¯ç”±è‡³ kimi</div>
                        <div class="prompt-content">ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°è¯´åˆ†æåŠ©æ‰‹ã€‚è¯·åŸºäºæä¾›çš„å°è¯´æ–‡æœ¬ç”Ÿæˆå…¨å±€æ‘˜è¦ã€‚

ä½ éœ€è¦åˆ†æï¼š
1. æ ¸å¿ƒä¸»é¢˜å’Œä¸­å¿ƒæ€æƒ³
2. ä¸»è¦æƒ…èŠ‚çº¿ç´¢
3. äººç‰©å…³ç³»ç½‘ç»œ
4. æƒ…æ„ŸåŸºè°ƒ
5. å…³é”®è½¬æŠ˜ç‚¹

è¦æ±‚ï¼š
- æ‘˜è¦é•¿åº¦500-800å­—
- çªå‡ºæ ¸å¿ƒå†²çª
- æ ‡æ³¨é‡è¦ä¼ç¬”
- ä¿æŒå®¢è§‚å‡†ç¡®</div>
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">ç”¨æˆ·æç¤ºè¯ (User Prompt)</div>
                        <div class="prompt-content">å°è¯´æ–‡æœ¬ï¼š[åˆ†å—åçš„å…¨æ–‡å†…å®¹]

è¯·ç”Ÿæˆå…¨å±€æ‘˜è¦ï¼ŒåŒ…æ‹¬ï¼š
1. ä¸€å¥è¯æ¦‚æ‹¬æ ¸å¿ƒæ•…äº‹
2. è¯¦ç»†æƒ…èŠ‚æ‘˜è¦
3. äººç‰©å…³ç³»å›¾æè¿°
4. æƒ…æ„ŸåŸºè°ƒåˆ†æ
5. å…³é”®è½¬æŠ˜ç‚¹åˆ—è¡¨</div>
                    </div>
                    
                    <div class="tech-stack">
                        <span class="tech-tag">kimi-128k</span>
                        <span class="tech-tag">é•¿ä¸Šä¸‹æ–‡</span>
                        <span class="tech-tag">æˆæœ¬: $0.012/1K</span>
                    </div>
                </div>
                
                <div class="flow-arrow">â¬‡</div>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">5</div>
                        <div class="step-title">å®ä½“æå– <span class="optimization-badge">è½»é‡æ¨¡å‹</span></div>
                    </div>
                    <div class="step-desc">
                        ä½¿ç”¨<span class="highlight">gpt-4o-mini</span>ï¼ˆæˆæœ¬æœ€ä½ï¼‰æå–äººç‰©ã€åœ°ç‚¹ã€ç‰©å“ç­‰å®ä½“ã€‚
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">ç³»ç»Ÿæç¤ºè¯ (System Prompt) - è·¯ç”±è‡³ gpt-4o-mini</div>
                        <div class="prompt-content">ä½ æ˜¯ä¸€ä¸ªå®ä½“è¯†åˆ«ä¸“å®¶ã€‚è¯·ä»å°è¯´æ–‡æœ¬ä¸­æå–æ‰€æœ‰å®ä½“ã€‚

å®ä½“ç±»å‹ï¼š
1. PERSON - äººç‰©ï¼ˆå§“åã€ç§°è°“ã€ä»£å·ï¼‰
2. LOCATION - åœ°ç‚¹ï¼ˆå›½å®¶ã€åŸå¸‚ã€å»ºç­‘ã€åœºæ™¯ï¼‰
3. ORGANIZATION - ç»„ç»‡ï¼ˆé—¨æ´¾ã€å…¬å¸ã€æœºæ„ï¼‰
4. ITEM - ç‰©å“ï¼ˆæ­¦å™¨ã€é“å…·ã€å®ç‰©ï¼‰
5. EVENT - äº‹ä»¶ï¼ˆèŠ‚æ—¥ã€æˆ˜å½¹ã€ä¼šè®®ï¼‰

è¾“å‡ºJSONæ ¼å¼ï¼š
{
  "entities": [
    {
      "name": "å®ä½“åç§°",
      "type": "å®ä½“ç±»å‹",
      "mentions": ["åˆ«å1", "åˆ«å2"],
      "firstAppearance": "é¦–æ¬¡å‡ºç°ç« èŠ‚",
      "description": "ç®€è¦æè¿°"
    }
  ]
}</div>
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">ç”¨æˆ·æç¤ºè¯ (User Prompt)</div>
                        <div class="prompt-content">è¯·ä»ä»¥ä¸‹å°è¯´æ–‡æœ¬ä¸­æå–æ‰€æœ‰å®ä½“ï¼š

[å°è¯´æ–‡æœ¬å†…å®¹]

è¦æ±‚ï¼š
- è¯†åˆ«äººç‰©çš„æ‰€æœ‰ç§°è°“å’Œåˆ«å
- æ ‡æ³¨æ¯ä¸ªå®ä½“çš„é¦–æ¬¡å‡ºç°ä½ç½®
- æä¾›ç®€è¦æè¿°
- æŒ‰é‡è¦æ€§æ’åº</div>
                    </div>
                    
                    <div class="tech-stack">
                        <span class="tech-tag">gpt-4o-mini</span>
                        <span class="tech-tag">ä½æˆæœ¬</span>
                        <span class="tech-tag">æˆæœ¬: $0.00015/1K</span>
                    </div>
                </div>
                
                <div class="flow-arrow">â¬‡</div>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">6</div>
                        <div class="step-title">è§’è‰²æ·±åº¦åˆ†æ <span class="optimization-badge">ç²¾å‡†æ¨¡å‹</span></div>
                    </div>
                    <div class="step-desc">
                        ä½¿ç”¨<span class="highlight">gpt-4o</span>å¯¹æ¯ä¸ªä¸»è¦è§’è‰²è¿›è¡Œæ·±åº¦åˆ†æï¼ŒåŒ…æ‹¬æ€§æ ¼ã€å¤–è²Œã€æƒ…æ„Ÿå¼§çº¿ç­‰ã€‚
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">ç³»ç»Ÿæç¤ºè¯ (System Prompt) - è·¯ç”±è‡³ gpt-4o</div>
                        <div class="prompt-content">ä½ æ˜¯ä¸€ä¸ªè§’è‰²åˆ†æä¸“å®¶ã€‚è¯·å¯¹å°è¯´è§’è‰²è¿›è¡Œæ·±åº¦åˆ†æã€‚

åˆ†æç»´åº¦ï¼š
1. å¤–è²Œç‰¹å¾ - äº”å®˜ã€èº«æã€ç©¿ç€ã€æ ‡å¿—æ€§ç‰¹å¾
2. æ€§æ ¼ç‰¹è´¨ - æ ¸å¿ƒæ€§æ ¼ã€è¡Œä¸ºæ¨¡å¼ã€è¯­è¨€é£æ ¼
3. èƒŒæ™¯æ•…äº‹ - å‡ºèº«ã€ç»å†ã€åŠ¨æœº
4. æƒ…æ„Ÿå¼§çº¿ - æƒ…æ„Ÿå˜åŒ–è½¨è¿¹ã€å…³é”®è½¬æŠ˜ç‚¹
5. äººç‰©å…³ç³» - ä¸å…¶ä»–è§’è‰²çš„å…³ç³»ç½‘ç»œ
6. è§†è§‰æç¤º - ç”¨äºAIç»˜ç”»çš„è¯¦ç»†æè¿°

è¾“å‡ºJSONæ ¼å¼ï¼š
{
  "name": "è§’è‰²å",
  "appearance": {
    "face": "é¢éƒ¨ç‰¹å¾",
    "body": "èº«æç‰¹å¾",
    "clothing": "æœè£…é£æ ¼",
    "distinctiveFeatures": ["ç‰¹å¾1", "ç‰¹å¾2"]
  },
  "personality": ["ç‰¹è´¨1", "ç‰¹è´¨2"],
  "emotionalArc": [
    {"stage": "é˜¶æ®µ1", "emotion": "æƒ…ç»ªçŠ¶æ€", "trigger": "è§¦å‘äº‹ä»¶"}
  ],
  "visualPrompt": "AIç»˜ç”»æç¤ºè¯"
}</div>
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">ç”¨æˆ·æç¤ºè¯ (User Prompt) - è§’è‰²: æ—é»›ç‰</div>
                        <div class="prompt-content">è¯·æ·±åº¦åˆ†æè§’è‰²"æ—é»›ç‰"ï¼š

ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼š
- å…¨å±€æ‘˜è¦ï¼š[æ‘˜è¦å†…å®¹]
- ç›¸å…³æ–‡æœ¬ç‰‡æ®µï¼š[RAGæ£€ç´¢åˆ°çš„ç›¸å…³æ®µè½]
- äººç‰©å…³ç³»ï¼š[å…³ç³»ç½‘ç»œ]

è¦æ±‚ï¼š
1. æå–æ‰€æœ‰å¤–è²Œæå†™
2. åˆ†ææ€§æ ¼çš„å¤šé¢æ€§
3. ç»˜åˆ¶æƒ…æ„Ÿå˜åŒ–æ›²çº¿
4. ç”ŸæˆAIç»˜ç”»æç¤ºè¯ï¼ˆè‹±æ–‡ï¼Œè¯¦ç»†æè¿°å¤–è²Œã€æœè£…ã€è¡¨æƒ…ã€åœºæ™¯ï¼‰</div>
                    </div>
                    
                    <div class="tech-stack">
                        <span class="tech-tag">gpt-4o</span>
                        <span class="tech-tag">é«˜è´¨é‡</span>
                        <span class="tech-tag">æˆæœ¬: $0.005/1K</span>
                    </div>
                </div>
                
                <div class="flow-arrow">â¬‡</div>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">7</div>
                        <div class="step-title">åœºæ™¯åˆ†æ</div>
                    </div>
                    <div class="step-desc">
                        åˆ†ææ¯ä¸ªåœºæ™¯çš„åœ°ç‚¹ç±»å‹ã€ç¯å¢ƒç‰¹å¾ã€è§†è§‰é£æ ¼ã€‚
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">ç³»ç»Ÿæç¤ºè¯ (System Prompt)</div>
                        <div class="prompt-content">ä½ æ˜¯ä¸€ä¸ªåœºæ™¯åˆ†æä¸“å®¶ã€‚è¯·åˆ†æå°è¯´ä¸­çš„åœºæ™¯è®¾ç½®ã€‚

åˆ†æç»´åº¦ï¼š
1. åœ°ç‚¹ç±»å‹ - indoor/outdoor, urban/natural
2. ç¯å¢ƒç‰¹å¾ - æ—¶é—´ã€å¤©æ°”ã€å…‰çº¿ã€æ°›å›´
3. åœºæ™¯åŠŸèƒ½ - å¼€åœºã€å†²çªã€è½¬æŠ˜ã€é«˜æ½®ã€ç»“å±€
4. è§†è§‰é£æ ¼ - è‰²å½©åŸºè°ƒã€å…‰å½±æ•ˆæœã€æ„å›¾å»ºè®®
5. æ¶‰åŠè§’è‰² - åœºæ™¯ä¸­å‡ºç°çš„è§’è‰²

è¾“å‡ºJSONæ ¼å¼ï¼š
{
  "name": "åœºæ™¯å",
  "locationType": "åœ°ç‚¹ç±»å‹",
  "environment": {
    "time": "æ—¶é—´",
    "weather": "å¤©æ°”",
    "lighting": "å…‰çº¿",
    "atmosphere": "æ°›å›´"
  },
  "sceneFunction": "åœºæ™¯åŠŸèƒ½",
  "visualPrompt": "AIç»˜ç”»æç¤ºè¯"
}</div>
                    </div>
                </div>
                
                <div class="flow-arrow">â¬‡</div>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">8</div>
                        <div class="step-title">JSONä¿®å¤ <span class="optimization-badge">å®¹é”™å¢å¼º</span></div>
                    </div>
                    <div class="step-desc">
                        ä½¿ç”¨<span class="highlight">JSONRepair</span>è‡ªåŠ¨ä¿®å¤LLMè¿”å›çš„å„ç§JSONæ ¼å¼é”™è¯¯ã€‚
                    </div>
                    
                    <div class="info-box">
                        <div class="info-box-title">ğŸ”§ ä¿®å¤ç­–ç•¥ï¼ˆ5çº§ï¼‰</div>
                        <p>1. ä»£ç å—æå– â†’ 2. æ‹¬å·åŒ¹é… â†’ 3. å¸¸è§é”™è¯¯ä¿®å¤ â†’ 4. æ¿€è¿›ä¿®å¤ â†’ 5. éƒ¨åˆ†æå–</p>
                    </div>
                    
                    <div class="code-block">
                        <code>// JSONä¿®å¤ç¤ºä¾‹
const result = JSONRepair.repairAndParse(response);
if (result.success) {
  console.log(`ä¿®å¤ç­–ç•¥: ${result.repairAttempts.join(' -> ')}`);
  return result.data;
}</code>
                    </div>
                </div>
                
                <div class="flow-arrow">â¬‡</div>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">9</div>
                        <div class="step-title">çŠ¶æ€ç®¡ç† <span class="optimization-badge">æ–­ç‚¹ç»­ä¼ </span></div>
                    </div>
                    <div class="step-desc">
                        ä½¿ç”¨<span class="highlight">ParseStateManager</span>è¿›è¡Œç»†ç²’åº¦çŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒå­ä»»åŠ¡çº§æ–­ç‚¹ç»­ä¼ ã€‚
                    </div>
                    
                    <div class="code-block">
                        <code>// å­ä»»åŠ¡çŠ¶æ€ç®¡ç†
parseStateManager.createSubTask('character', 'æ—é»›ç‰');
parseStateManager.startSubTask('character_æ—é»›ç‰');
// ... æ‰§è¡Œè§£æ ...
parseStateManager.completeSubTask('character_æ—é»›ç‰', result, {
  modelUsed: 'gpt-4o',
  tokenUsed: 2500
});</code>
                    </div>
                </div>
            </div>

            <!-- Phase 2: æ•ˆç‡ä¼˜åŒ– -->
            <div class="phase">
                <h2 class="phase-title">
                    Phase 2: æ•ˆç‡ä¼˜åŒ–
                    <span class="phase-badge">æ€§èƒ½é˜¶æ®µ</span>
                </h2>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">10</div>
                        <div class="step-title">RAGæ£€ç´¢å¢å¼º <span class="optimization-badge">ä¸Šä¸‹æ–‡ä¼˜åŒ–</span></div>
                    </div>
                    <div class="step-desc">
                        ä½¿ç”¨<span class="highlight">RAGRetrieval</span>è¿›è¡Œå‘é‡æ£€ç´¢ï¼Œä¸ºæ¯ä¸ªè§’è‰²/åœºæ™¯æ£€ç´¢æœ€ç›¸å…³çš„åŸæ–‡ç‰‡æ®µã€‚
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">RAGæ£€ç´¢æµç¨‹</div>
                        <div class="prompt-content">1. æ„å»ºå‘é‡å­˜å‚¨
   - ä¸ºæ¯ä¸ªåˆ†å—ç”Ÿæˆembedding
   - å­˜å‚¨åˆ°å†…å­˜å‘é‡åº“

2. æ£€ç´¢ç›¸å…³ä¸Šä¸‹æ–‡
   - ç”ŸæˆæŸ¥è¯¢å‘é‡
   - è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦
   - è¿”å›TopKç›¸å…³åˆ†å—

3. ç”Ÿæˆå¢å¼ºæç¤ºè¯
   - ç»„åˆæ£€ç´¢ç»“æœ
   - é™åˆ¶tokenæ•°é‡
   - æ³¨å…¥åˆ°ç”¨æˆ·æç¤ºè¯</div>
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">å¢å¼ºåçš„ç”¨æˆ·æç¤ºè¯ç¤ºä¾‹</div>
                        <div class="prompt-content">åŸºäºä»¥ä¸‹å°è¯´åŸæ–‡ç‰‡æ®µå›ç­”é—®é¢˜ï¼š

---
[ç›¸å…³åŸæ–‡ç‰‡æ®µ1 - ç›¸ä¼¼åº¦: 0.92]
æ—é»›ç‰æ‰‹æŒèŠ±é”„ï¼Œå°†è½èŠ±åŸ‹å…¥åœŸä¸­ï¼Œæ„Ÿå¹äººç”Ÿæ— å¸¸...

---
[ç›¸å…³åŸæ–‡ç‰‡æ®µ2 - ç›¸ä¼¼åº¦: 0.87]
é»›ç‰è‘¬èŠ±æ˜¯ã€Šçº¢æ¥¼æ¢¦ã€‹ä¸­çš„ç»å…¸åœºæ™¯ï¼Œä½“ç°äº†å¥¹æ•æ„Ÿç»†è…»çš„æ€§æ ¼...

---

é—®é¢˜ï¼šåˆ†ææ—é»›ç‰"è‘¬èŠ±"åœºæ™¯çš„æƒ…æ„Ÿå†…æ¶µ

è¯·ä¸¥æ ¼åŸºäºä¸Šè¿°åŸæ–‡ç‰‡æ®µå›ç­”ï¼Œä¸è¦æ·»åŠ åŸæ–‡ä¸­æ²¡æœ‰çš„ä¿¡æ¯ã€‚</div>
                    </div>
                </div>
                
                <div class="flow-arrow">â¬‡</div>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">11</div>
                        <div class="step-title">å¤šçº§ç¼“å­˜ <span class="optimization-badge">æˆæœ¬é™ä½60%</span></div>
                    </div>
                    <div class="step-desc">
                        ä½¿ç”¨<span class="highlight">MultiLevelCache</span>å®ç°L1/L2/L3ä¸‰çº§ç¼“å­˜ï¼Œé¿å…é‡å¤APIè°ƒç”¨ã€‚
                    </div>
                    
                    <div class="info-box">
                        <div class="info-box-title">ğŸ’¾ ä¸‰çº§ç¼“å­˜æ¶æ„</div>
                        <p><strong>L1 (å†…å­˜):</strong> 5åˆ†é’ŸTTLï¼Œå‘½ä¸­ç‡25%</p>
                        <p><strong>L2 (IndexedDB):</strong> 1å°æ—¶TTLï¼Œå‘½ä¸­ç‡30%</p>
                        <p><strong>L3 (äº‘ç«¯):</strong> 24å°æ—¶TTLï¼Œå‘½ä¸­ç‡10%</p>
                        <p><strong>æ€»å‘½ä¸­ç‡:</strong> 65%</p>
                    </div>
                    
                    <div class="code-block">
                        <code>// ç¼“å­˜ä½¿ç”¨ç¤ºä¾‹
const cacheKey = cache.generateKey('character_analysis', {
  name: 'æ—é»›ç‰',
  scene: 'è‘¬èŠ±'
});

// å…ˆæŸ¥ç¼“å­˜
let result = await cache.get(cacheKey);
if (!result) {
  // ç¼“å­˜æœªå‘½ä¸­ï¼Œè°ƒç”¨API
  result = await modelRouter.routeAndExecute('character_analysis', prompt);
  // å­˜å…¥ç¼“å­˜
  await cache.set(cacheKey, result);
}</code>
                    </div>
                </div>
            </div>

            <!-- Phase 3: ä¸šåŠ¡ä¼˜åŒ– -->
            <div class="phase">
                <h2 class="phase-title">
                    Phase 3: ä¸šåŠ¡ä¼˜åŒ–
                    <span class="phase-badge">è´¨é‡é˜¶æ®µ</span>
                </h2>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">12</div>
                        <div class="step-title">çŸ­å‰§è§„åˆ™æ£€æŸ¥ <span class="optimization-badge">ä¸“ä¸šä¼˜åŒ–</span></div>
                    </div>
                    <div class="step-desc">
                        ä½¿ç”¨<span class="highlight">ShortDramaRules</span>è¿›è¡ŒçŸ­å‰§ä¸“ä¸šåŒ–è§„åˆ™æ£€æŸ¥ã€‚
                    </div>
                    
                    <div class="info-box">
                        <div class="info-box-title">ğŸ“‹ 5å¤§çŸ­å‰§è§„åˆ™</div>
                        <p><strong>1. é»„é‡‘3ç§’:</strong> å¼€åœºå¿…é¡»æœ‰å¼ºå†²çªæˆ–æ‚¬å¿µ</p>
                        <p><strong>2. å†²çªå¯†åº¦:</strong> æ¯60ç§’è‡³å°‘1ä¸ªå†²çªç‚¹</p>
                        <p><strong>3. æƒ…ç»ªæ›²çº¿:</strong> å¿…é¡»æœ‰é«˜æ½®å’Œä½è°·</p>
                        <p><strong>4. è§’è‰²å‡ºåœº:</strong> ä¸»è¦è§’è‰²60ç§’å†…å‡ºåœº</p>
                        <p><strong>5. åœºæ™¯å¤šæ ·æ€§:</strong> é¿å…åœºæ™¯è¿‡äºå•ä¸€</p>
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">è§„åˆ™æ£€æŸ¥ç»“æœç¤ºä¾‹</div>
                        <div class="prompt-content">{
  "score": 85,
  "violations": [
    {
      "ruleId": "conflict_density",
      "ruleName": "å†²çªå¯†åº¦è§„åˆ™",
      "severity": "warning",
      "message": "å†²çªç‚¹ä¸è¶³ï¼Œå½“å‰3ä¸ªï¼Œå»ºè®®è‡³å°‘5ä¸ª",
      "suggestion": "å¢åŠ è§’è‰²é—´çš„çŸ›ç›¾æˆ–å¤–éƒ¨é˜»ç¢"
    }
  ],
  "suggestions": [
    "å‰§æœ¬è´¨é‡è‰¯å¥½ï¼Œç¬¦åˆçŸ­å‰§åˆ¶ä½œæ ‡å‡†",
    "å»ºè®®å¢åŠ åœºæ™¯æ•°é‡ä»¥ä¸°å¯Œå‰§æƒ…"
  ]
}</div>
                    </div>
                </div>
                
                <div class="flow-arrow">â¬‡</div>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">13</div>
                        <div class="step-title">åˆ†é•œç”Ÿæˆ</div>
                    </div>
                    <div class="step-desc">
                        åŸºäºåœºæ™¯å’Œè§’è‰²ä¿¡æ¯ç”Ÿæˆåˆ†é•œè„šæœ¬ã€‚
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">ç³»ç»Ÿæç¤ºè¯ (System Prompt)</div>
                        <div class="prompt-content">ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šå¯¼æ¼”ã€‚è¯·ä¸ºä»¥ä¸‹åœºæ™¯è®¾è®¡åˆ†é•œã€‚

åˆ†é•œè¦æ±‚ï¼š
1. æ™¯åˆ«é€‰æ‹© - ç‰¹å†™/è¿‘æ™¯/ä¸­æ™¯/å…¨æ™¯/è¿œæ™¯
2. é•œå¤´è¿åŠ¨ - æ¨/æ‹‰/æ‘‡/ç§»/è·Ÿ/å‡/é™
3. æ‹æ‘„è§’åº¦ - å¹³è§†/ä¿¯è§†/ä»°è§†/å€¾æ–œ
4. æ—¶é•¿æ§åˆ¶ - æ¯ä¸ªé•œå¤´3-10ç§’
5. ç”»é¢å†…å®¹ - è¯¦ç»†æè¿°ç”»é¢å…ƒç´ 

è¾“å‡ºJSONæ ¼å¼ï¼š
{
  "shots": [
    {
      "shotNumber": 1,
      "shotType": "ç‰¹å†™",
      "cameraMovement": "æ¨é•œå¤´",
      "duration": 3,
      "description": "ç”»é¢æè¿°",
      "characters": ["è§’è‰²å"],
      "dialogue": "å°è¯",
      "visualPrompt": "AIç»˜ç”»æç¤ºè¯"
    }
  ]
}</div>
                    </div>
                </div>
                
                <div class="flow-arrow">â¬‡</div>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">14</div>
                        <div class="step-title">äººå·¥å®¡æ ¸ (HITL) <span class="warning-badge">å…³é”®èŠ‚ç‚¹</span></div>
                    </div>
                    <div class="step-desc">
                        ä½¿ç”¨<span class="highlight">HumanInTheLoop</span>åœ¨å…³é”®èŠ‚ç‚¹è¿›è¡Œäººå·¥å®¡æ ¸ï¼Œç¡®ä¿è´¨é‡ã€‚
                    </div>
                    
                    <div class="info-box">
                        <div class="info-box-title">ğŸ‘¥ 4ä¸ªå®¡æ ¸èŠ‚ç‚¹</div>
                        <p><strong>1. Story Bible:</strong> æ•…äº‹åœ£ç»å®¡æ ¸ï¼ˆé”å®šåä¸å¯å˜ï¼‰</p>
                        <p><strong>2. Character Design:</strong> è§’è‰²è®¾è®¡å®¡æ ¸</p>
                        <p><strong>3. Scene Outline:</strong> åœºæ™¯å¤§çº²å®¡æ ¸</p>
                        <p><strong>4. Shot List:</strong> åˆ†é•œåˆ—è¡¨å®¡æ ¸</p>
                    </div>
                    
                    <div class="prompt-box">
                        <div class="prompt-label">å®¡æ ¸ç•Œé¢æç¤ºè¯</div>
                        <div class="prompt-content">ã€æ•…äº‹åœ£ç»å®¡æ ¸ã€‘

è¯·å®¡æ ¸ä»¥ä¸‹å†…å®¹ï¼š

ğŸ“– æ ¸å¿ƒè®¾å®š
- ä¸»é¢˜: [ä¸»é¢˜å†…å®¹]
- åŸºè°ƒ: [æƒ…æ„ŸåŸºè°ƒ]
- ç›®æ ‡å—ä¼—: [å—ä¼—ç¾¤ä½“]

ğŸ‘¤ ä¸»è¦è§’è‰²
[è§’è‰²åˆ—è¡¨åŠè®¾å®š]

ğŸ¬ å…³é”®åœºæ™¯
[åœºæ™¯åˆ—è¡¨]

âœ… å®¡æ ¸é€‰é¡¹:
[é€šè¿‡] - å†…å®¹ç¬¦åˆè¦æ±‚ï¼Œè¿›å…¥ä¸‹ä¸€é˜¶æ®µ
[ä¿®æ”¹] - éœ€è¦è°ƒæ•´ï¼Œè¯·å¡«å†™ä¿®æ”¹æ„è§
[æ‹’ç»] - ä¸ç¬¦åˆè¦æ±‚ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆ

ğŸ’¡ ä¿®æ”¹å»ºè®®:
[æ–‡æœ¬è¾“å…¥æ¡†]</div>
                    </div>
                </div>
            </div>

            <!-- è¾“å‡ºç»“æœ -->
            <div class="phase">
                <h2 class="phase-title">
                    è¾“å‡ºç»“æœ
                    <span class="phase-badge">å®Œæˆ</span>
                </h2>
                
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">15</div>
                        <div class="step-title">ç”Ÿæˆå®Œæ•´è§£æç»“æœ</div>
                    </div>
                    <div class="step-desc">
                        æ•´åˆæ‰€æœ‰è§£æç»“æœï¼Œç”Ÿæˆæœ€ç»ˆçš„Scriptå¯¹è±¡ã€‚
                    </div>
                    
                    <div class="code-block">
                        <code>// æœ€ç»ˆè¾“å‡ºç»“æ„
{
  "id": "script_xxx",
  "projectId": "project_xxx",
  "title": "å°è¯´æ ‡é¢˜",
  "content": "åŸå§‹æ–‡æœ¬",
  "parseState": {
    "stage": "completed",
    "progress": 100,
    "metadata": { ... },
    "characters": [ ... ],
    "scenes": [ ... ],
    "shots": [ ... ]
  },
  "costEstimate": {
    "totalTokens": 150000,
    "totalUSD": 0.35,
    "breakdown": { ... }
  }
}</code>
                    </div>
                </div>
            </div>

            <!-- æˆæœ¬åˆ†æ -->
            <div class="phase">
                <h2 class="phase-title">
                    ğŸ’° æˆæœ¬åˆ†æ
                    <span class="phase-badge">ç»æµæ•ˆç›Š</span>
                </h2>
                
                <table>
                    <tr>
                        <th>ä¼˜åŒ–é¡¹</th>
                        <th>ä¼˜åŒ–å‰</th>
                        <th>ä¼˜åŒ–å</th>
                        <th>èŠ‚çº¦</th>
                    </tr>
                    <tr>
                        <td>æ¨¡å‹è·¯ç”±</td>
                        <td>å…¨éƒ¨gpt-4o ($0.005/1K)</td>
                        <td>æ™ºèƒ½é€‰æ‹© ($0.00015-$0.012/1K)</td>
                        <td>20%</td>
                    </tr>
                    <tr>
                        <td>å¤šçº§ç¼“å­˜</td>
                        <td>0%å‘½ä¸­ç‡</td>
                        <td>65%å‘½ä¸­ç‡</td>
                        <td>35%</td>
                    </tr>
                    <tr>
                        <td>è¯­ä¹‰åˆ†å—</td>
                        <td>å›ºå®š6000å­—ç¬¦</td>
                        <td>æ™ºèƒ½è¾¹ç•Œ</td>
                        <td>15%</td>
                    </tr>
                    <tr>
                        <td>RAGæ£€ç´¢</td>
                        <td>å…¨é‡ä¸Šä¸‹æ–‡</td>
                        <td>ç²¾å‡†æ£€ç´¢</td>
                        <td>10%</td>
                    </tr>
                    <tr>
                        <td><strong>æ€»è®¡</strong></td>
                        <td><strong>$1.64/éƒ¨</strong></td>
                        <td><strong>$0.33/éƒ¨</strong></td>
                        <td><strong>80%</strong></td>
                    </tr>
                </table>
            </div>
        </div>
        
        <div class="footer">
            <p>AIå½±è§†èµ„äº§ç”Ÿæˆå¹³å° - å°è¯´è§£ææµç¨‹æ–‡æ¡£</p>
            <p>åŸºäºä¼˜åŒ–åçš„æ¶æ„ | 141ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡ | å®Œå…¨å‘åå…¼å®¹</p>
        </div>
    </div>
</body>
</html>